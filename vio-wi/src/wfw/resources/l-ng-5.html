<!DOCTYPE html>
<html data-ng-app>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
        <script type="text/javascript">
            function TodoCtrl($scope,$http) {
                
                
                $http.get('todos.js').success(function(data){
                    console.log("return data=");
                    console.log(data);
                    $scope.todos=data.d;
                });
                

                $scope.addTodo = function() {
                    console.log('todos:');
                    console.log($scope.todos);
                    $scope.todos.push({text: $scope.todoText, done: false});
                    $scope.todoText = '';
                };

                            
                $scope.inlineTodo = function(todo) {
                    return todo.text+' is '+todo.done;
                };
            }
        </script>
        <style type="text/css">
            .done-true {
                background-color: green;
            }
            .done-false {
                background-color:red;
            }
        </style>
    </head>
    <body>
        <div>
            <label>Search:</label>
            <input type="text" data-ng-model="searchQuery" placeholder="Enter a name here">

            <div data-ng-controller="TodoCtrl">
                <table>
                    <thead>
                        <tr>
                            <th>TODO</th>
                            <th>is done ?</th>
                            <th>c</th>
                             <th>in</th>
                        </tr>
                    </thead>

                    <tbody >
                        <tr data-ng-repeat="todo in todos|filter:searchQuery">
                            <td>{{todo.text}}</td>
                            <td>{{todo.done}}</td>
                            <td>
                                <input type="checkbox" 
                                       data-ng-model="todo.done"/>
                            </td>
                            <td>
                               {{inlineTodo(todo)}}
                            </td>
                        </tr>
                    </tbody>
                </table>
                <form data-ng-submit="addTodo()">
                    <input type="text" placeholder="add todo here" data-ng-model="todoText"/>
                    <button type="submit" value="Add">Add</button>
                </form>
            </div>
        </div>
    </body>
</html>
